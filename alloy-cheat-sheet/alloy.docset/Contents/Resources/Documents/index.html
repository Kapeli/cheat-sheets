<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<title>alloy</title>
<link href='style.css' rel='stylesheet'>
<link href='//dash_ref/Category/Sig declarations/1'>
<link href='//dash_ref_Sig declarations/Entry/Simple/0'>
<link href='//dash_ref_Sig declarations/Entry/Disjoint subjsets/0'>
<link href='//dash_ref_Sig declarations/Entry/Non-disjoint subsets/0'>
<link href='//dash_ref/Category/Predicate calculus/1'>
<link href='//dash_ref_Predicate calculus/Entry/Build a set/0'>
<link href='//dash_ref_Predicate calculus/Entry/One-to-one/0'>
<link href='//dash_ref_Predicate calculus/Entry/Reflexive/0'>
<link href='//dash_ref/Category/Set operations/1'>
<link href='//dash_ref_Set operations/Entry/Set-valued operators/0'>
<link href='//dash_ref_Set operations/Entry/Boolean-valued operator/0'>
<link href='//dash_ref_Set operations/Entry/Constants/0'>
<link href='//dash_ref/Category/Relational operations/1'>
<link href='//dash_ref_Relational operations/Entry/Combining relations/0'>
<link href='//dash_ref_Relational operations/Entry/Arrow producct/0'>
<link href='//dash_ref_Relational operations/Entry/Reachability/0'>
<link href='//dash_ref_Relational operations/Entry/Modifying relations/0'>
<link href='//dash_ref_Relational operations/Entry/Cardinality/0'>
<link href='//dash_ref/Category/Running and verifying/1'>
<link href='//dash_ref_Running and verifying/Entry/Run/0'>
<link href='//dash_ref_Running and verifying/Entry/Assert and check/0'>
<link href='//dash_ref/Category/Ordering/1'>
<link href='//dash_ref_Ordering/Entry//0'>
<link href='//dash_ref_Ordering/Entry/first, next, last/0'>
<link href='//dash_ref_Ordering/Entry/Disambiguating multiple ordered/0'>
<link href='//dash_ref/Category/Behaviors/1'>
<link href='//dash_ref_Behaviors/Entry/Modeling behaviors/0'>
<link href='//dash_ref_Behaviors/Entry/Predicate-based/0'>
<link href='//dash_ref_Behaviors/Entry/Event-based/0'>
<link href='//dash_ref/Category/Sequences/1'>
<link href='//dash_ref_Sequences/Entry/seq/0'>
<link href='//dash_ref_Sequences/Entry/seq helper functions/0'>
</head>
<body>
<header>
<h1>alloy</h1>
</header>
<article>
<p></p>
<section class='category'>
<h2 id='//dash_ref/Category/Sig declarations/1'>
Sig declarations
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_Sig declarations/Entry/Simple/0'>
<td class='description' colspan='2'>
<div class='name'><p>Simple</p>
</div>
<div class='notes'><p>Set of atoms</p>
<pre class="highlight plaintext">sig A {}</pre></div>
</td>
</tr>
<tr id='//dash_ref_Sig declarations/Entry/Disjoint subjsets/0'>
<td class='description' colspan='2'>
<div class='name'><p>Disjoint subjsets</p>
</div>
<div class='notes'><pre class="highlight plaintext">sig B, C extends A {}</pre></div>
</td>
</tr>
<tr id='//dash_ref_Sig declarations/Entry/Non-disjoint subsets/0'>
<td class='description' colspan='2'>
<div class='name'><p>Non-disjoint subsets</p>
</div>
<div class='notes'><pre class="highlight plaintext">sig B in A {}&#x000A;sig C in A {}</pre></div>
</td>
</tr>
</table>
</div>
</section>
<section class='category'>
<h2 id='//dash_ref/Category/Predicate calculus/1'>
Predicate calculus
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_Predicate calculus/Entry/Build a set/0'>
<td class='description' colspan='2'>
<div class='name'><p>Build a set</p>
</div>
<div class='notes'><pre class="highlight plaintext">r' = {b: B, a:A, c: C | a-&gt;b-&gt;c in r}</pre></div>
</td>
</tr>
<tr id='//dash_ref_Predicate calculus/Entry/One-to-one/0'>
<td class='description' colspan='2'>
<div class='name'><p>One-to-one</p>
</div>
<div class='notes'><pre class="highlight plaintext">all a : A | lone foo.a</pre></div>
</td>
</tr>
<tr id='//dash_ref_Predicate calculus/Entry/Reflexive/0'>
<td class='description' colspan='2'>
<div class='name'><p>Reflexive</p>
</div>
<div class='notes'><pre class="highlight plaintext">all a : A | a-&gt;a in foo</pre></div>
</td>
</tr>
</table>
</div>
</section>
<section class='category'>
<h2 id='//dash_ref/Category/Set operations/1'>
Set operations
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_Set operations/Entry/Set-valued operators/0'>
<td class='description' colspan='2'>
<div class='name'><p>Set-valued operators</p>
</div>
<div class='notes'><ul>
<li><code>+</code> - union</li>
<li><code>&amp;</code> - intersection</li>
<li><code>-</code> - difference</li>
</ul>
</div>
</td>
</tr>
<tr id='//dash_ref_Set operations/Entry/Boolean-valued operator/0'>
<td class='description' colspan='2'>
<div class='name'><p>Boolean-valued operator</p>
</div>
<div class='notes'><ul>
<li><code>in</code> - subset</li>
<li><code>not in</code> - not subset</li>
<li><code>=</code> - equality</li>
</ul>
</div>
</td>
</tr>
<tr id='//dash_ref_Set operations/Entry/Constants/0'>
<td class='description' colspan='2'>
<div class='name'><p>Constants</p>
</div>
<div class='notes'><ul>
<li><code>none</code> - empty set</li>
<li><code>univ</code> - universal set</li>
<li><code>iden</code> - identity relation</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</section>
<section class='category'>
<h2 id='//dash_ref/Category/Relational operations/1'>
Relational operations
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_Relational operations/Entry/Combining relations/0'>
<td class='description' colspan='2'>
<div class='name'><p>Combining relations</p>
</div>
<div class='notes'><ul>
<li><code>-&gt;</code> - arrow product</li>
<li><code>.</code> - dot join</li>
<li><code>[]</code> - box join</li>
<li><code>^</code> - transitive closure</li>
<li><code>*</code> - reflexive transitive closure</li>
</ul>
</div>
</td>
</tr>
<tr id='//dash_ref_Relational operations/Entry/Arrow producct/0'>
<td class='description' colspan='2'>
<div class='name'><p>Arrow producct</p>
</div>
<div class='notes'><p>Form a relation with all pairs from p,q</p>
<pre class="highlight plaintext">p-&gt;q</pre></div>
</td>
</tr>
<tr id='//dash_ref_Relational operations/Entry/Reachability/0'>
<td class='description' colspan='2'>
<div class='name'><p>Reachability</p>
</div>
<div class='notes'><ul>
<li><code>^</code> - transitive closure</li>
<li><code>*</code> - reflexive transitive closure</li>
</ul>
</div>
</td>
</tr>
<tr id='//dash_ref_Relational operations/Entry/Modifying relations/0'>
<td class='description' colspan='2'>
<div class='name'><p>Modifying relations</p>
</div>
<div class='notes'><ul>
<li><code>~</code> - transpose</li>
<li><code>&lt;:</code> - domain restriction</li>
<li><code>:&gt;</code> - range restriction</li>
<li><code>++</code> - override</li>
</ul>
</div>
</td>
</tr>
<tr id='//dash_ref_Relational operations/Entry/Cardinality/0'>
<td class='description' colspan='2'>
<div class='name'><p>Cardinality</p>
</div>
<div class='notes'><p>Size of set s:</p>
<pre class="highlight plaintext">#s</pre></div>
</td>
</tr>
</table>
</div>
</section>
<section class='category'>
<h2 id='//dash_ref/Category/Running and verifying/1'>
Running and verifying
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_Running and verifying/Entry/Run/0'>
<td class='description' colspan='2'>
<div class='name'><p>Run</p>
</div>
<div class='notes'><pre class="highlight plaintext">pred show() {}&#x000A;run show for 3 but 1 Book</pre></div>
</td>
</tr>
<tr id='//dash_ref_Running and verifying/Entry/Assert and check/0'>
<td class='description' colspan='2'>
<div class='name'><p>Assert and check</p>
</div>
<div class='notes'><pre class="highlight plaintext">assert shouldAlwaysBeTrue {&#x000A;    ....&#x000A;    ....&#x000A;}&#x000A;&#x000A;check shouldAlwaysBeTrue for 3 but 1 Foo</pre></div>
</td>
</tr>
</table>
</div>
</section>
<section class='category'>
<h2 id='//dash_ref/Category/Ordering/1'>
Ordering
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_Ordering/Entry//0'>
<td class='description' colspan='2'>
<div class='name'></div>
<div class='notes'><pre class="highlight plaintext">open util/ordering[State]&#x000A;&#x000A;sig State { ... }</pre></div>
</td>
</tr>
<tr id='//dash_ref_Ordering/Entry/first, next, last/0'>
<td class='description' colspan='2'>
<div class='name'><p>first, next, last</p>
</div>
<div class='notes'><ul>
<li><code>first</code> returns the first State atom in the linear ordering.</li>
<li><code>last</code> returns the last State atom in the linear ordering.</li>
<li><code>next</code> maps each State atom (except the last atom) to the next State atom.</li>
<li><code>lt</code></li>
<li><code>gt</code></li>
<li><code>lte</code></li>
<li><code>gte</code></li>
<li><code>larger</code></li>
<li><code>smaller</code></li>
</ul>
</div>
</td>
</tr>
<tr id='//dash_ref_Ordering/Entry/Disambiguating multiple ordered/0'>
<td class='description' colspan='2'>
<div class='name'><p>Disambiguating multiple ordered</p>
</div>
<div class='notes'><p>Use <code>as &lt;alias&gt;</code> and do <code>&lt;alias&gt;/method</code></p>
<pre class="highlight plaintext">open util/ordering[State] as StateOrd&#x000A;open util/ordering[Process] as ProcessOrd&#x000A;&#x000A;...&#x000A;&#x000A;StateOrd/first&#x000A;</pre></div>
</td>
</tr>
</table>
</div>
</section>
<section class='category'>
<h2 id='//dash_ref/Category/Behaviors/1'>
Behaviors
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_Behaviors/Entry/Modeling behaviors/0'>
<td class='description' colspan='2'>
<div class='name'><p>Modeling behaviors</p>
</div>
<div class='notes'><p>The typical approach is to use ordering to model a sequence of states.</p>

<p>There are two approaches:</p>

<ul>
<li>predicate-based</li>
<li>event-based</li>
</ul>
</div>
</td>
</tr>
<tr id='//dash_ref_Behaviors/Entry/Predicate-based/0'>
<td class='description' colspan='2'>
<div class='name'><p>Predicate-based</p>
</div>
<div class='notes'><p>Predicate-based is similar to the TLA+ approach.</p>

<p>See <a href="http://alloy.mit.edu/alloy/tutorials/online/frame-RC-1.html">River crossing</a> for an example.</p>

<p>Here&#39;s a skeleton</p>
<pre class="highlight plaintext">open util/ordering[State] &#x000A;&#x000A;sig State { ... }&#x000A;&#x000A;// True of the initial state&#x000A;pred init[s : State] {&#x000A;    ...&#x000A;}&#x000A;&#x000A;// True of transitions&#x000A;pred nextState[s, s': State] {&#x000A;    ...&#x000A;}&#x000A;&#x000A;fact traces {&#x000A;    init[first]&#x000A;    all s: State, s': s.next | nextState[s, s']&#x000A;}</pre></div>
</td>
</tr>
<tr id='//dash_ref_Behaviors/Entry/Event-based/0'>
<td class='description' colspan='2'>
<div class='name'><p>Event-based</p>
</div>
<div class='notes'><p>In the event-based approach, events are explicitly modelled.</p>

<p>See <a href="http://cs.brown.edu/courses/cs195y/2017/assignments/alloy-4.html">http://cs.brown.edu/courses/cs195y/2017/assignments/alloy-4.html</a> for an example.</p>
<pre class="highlight plaintext">open util/ordering[State]&#x000A;&#x000A;// Event has a pre-state and a post-state&#x000A;abstract sig Event {&#x000A;    pre, post: State&#x000A;}&#x000A;&#x000A;// Define custom events &#x000A;sig DoSomething extends Event {&#x000A;} {&#x000A;    // define pre, post constraints&#x000A;}&#x000A;&#x000A;&#x000A;// True of the initial state&#x000A;pred init[s: State] {&#x000A;    ...&#x000A;}&#x000A;&#x000A;fact traces {&#x000A;    init[first]&#x000A;    // All states are the preceding state of an event, except that last one&#x000A;    all s: State - last | some pre.s&#x000A;    }&#x000A;}</pre></div>
</td>
</tr>
</table>
</div>
</section>
<section class='category'>
<h2 id='//dash_ref/Category/Sequences/1'>
Sequences
</h2>
<div class='scrollable'>
<table>
<tr id='//dash_ref_Sequences/Entry/seq/0'>
<td class='description' colspan='2'>
<div class='name'><p>seq</p>
</div>
<div class='notes'><p><code>seq Foo</code> is shorthand for <code>Int -&gt; Foo</code></p>

<p>See <a href="http://alloy.mit.edu/alloy/documentation/quickguide/seq.html">http://alloy.mit.edu/alloy/documentation/quickguide/seq.html</a></p>
<pre class="highlight plaintext">sig Book { }&#x000A;sig Person {&#x000A;    books: seq Book&#x000A;}</pre></div>
</td>
</tr>
<tr id='//dash_ref_Sequences/Entry/seq helper functions/0'>
<td class='description' colspan='2'>
<div class='name'><p>seq helper functions</p>
</div>
<div class='notes'><ul>
<li><code>#s</code> - number of elements</li>
<li><code>s.elems</code> - set of elements</li>
<li><code>s.first</code></li>
<li><code>s.last</code></li>
<li><code>s.rest</code> - first element removed</li>
<li><code>s.butlast</code> - last element removed</li>
<li><code>s.isEmpty</code></li>
<li><code>s.hasDups</code></li>
<li><code>s.inds</code></li>
<li><code>s.lastIdx</code></li>
<li><code>s.afterLastIdx</code></li>
<li><code>s.idxOf[x]</code></li>
<li><code>s.indsOf[x]</code></li>
<li><code>s.add[x]</code></li>
<li><code>s.setAt[i, x]</code></li>
<li><code>s.insert[i, x]</code></li>
<li><code>s.delete[i]</code></li>
<li><code>s.append[b]</code></li>
<li><code>s.subseq[from, to]</code></li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</section>
</article>
<footer>
Generated with <a onclick="window.dash.openExternal_(this.href); return false;" href='https://github.com/Kapeli/cheatset#readme'>cheatset</a>
</footer>
</body>
</html>
